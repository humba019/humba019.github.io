<!DOCTYPE html>
<html>
<head>
	<title>humba</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="./style.css">	
	<script>
		var arr = [
			{message: 'I am working', viewing: 0},
			{message: 'on', viewing: 0},
			{message: 'it', viewing: 0},
			{message: '...', viewing: 0}
		];

		var arrViewing = [];

		function loadPresentationInformation_onload(){
			var index = 0;
			arr.forEach(function(arrObj){
				var toAppend = document.createElement("div");
				toAppend.id = "div"+index;
				toAppend.innerHTML = arrObj.message;

				if(index == 0){
					arrObj.viewing = 1;
					toAppend.style.display = "block";
					toAppend.style.transition = "opacity .5s linear";
					toAppend.classList.remove("btnhide");
					arrViewing.push(arrObj);
				}else{
					arrObj.viewing = 0;
					toAppend.style.display = "none";
					toAppend.style.transition = "opacity .5s linear";
					toAppend.classList.add("btnhide");
					arrViewing.push(arrObj);
				}

				document.getElementById("presentation_movement")
				.appendChild(toAppend);
				index++;
			});
		}

		function movementMessage_onclick(direction){
			var curentlyViewing = arrViewing.filter(v => v.viewing == 1);
			var indexOfViewing = arrViewing.indexOf(curentlyViewing[0]);

			if(direction == 'next'){
				movmentToNext(indexOfViewing+1);
			}else{
				if(direction == 'previous'){
					movmentToPrevious(indexOfViewing-1);
				}
			}
		}

		function movmentToNext(currentIndex){
			var lastIndex = (arr.length-1);
			arrViewing = [];
			document.getElementById("presentation_movement").innerHTML = "";

			if(currentIndex > lastIndex){
				var index = 0;
				arr.forEach(function(arrObj){
					var toAppend = document.createElement("div");
					toAppend.id = "div"+index;
					toAppend.innerHTML = arrObj.message;

					if(index == 0){
						arrObj.viewing = 1;
						toAppend.style.display = "block";
						toAppend.style.transition = "opacity .5s linear";
						toAppend.classList.remove("btnhide");
						arrViewing.push(arrObj);
					}else{
						arrObj.viewing = 0;
						toAppend.style.display = "none";
						toAppend.style.transition = "opacity .5s linear";
						toAppend.classList.add("btnhide");
						arrViewing.push(arrObj);
					}

					document.getElementById("presentation_movement")
					.appendChild(toAppend);
					index++;
				});
			}else{
				if(currentIndex <= lastIndex){
					var index = 0;
					arr.forEach(function(arrObj){
						var toAppend = document.createElement("div");
						toAppend.id = "div"+index;
						toAppend.innerHTML = arrObj.message;

						if(index == currentIndex){
							arrObj.viewing = 1;
							toAppend.style.display = "block";
							toAppend.style.transition = "opacity .5s linear";
							toAppend.classList.remove("btnhide");
							arrViewing.push(arrObj);
						}else{
							arrObj.viewing = 0;
							toAppend.style.display = "none";
							toAppend.style.transition = "opacity .5s linear";
							toAppend.classList.add("btnhide");
							arrViewing.push(arrObj);
						}

						document.getElementById("presentation_movement")
						.appendChild(toAppend);
						index++;
					});
				}
			}
		}

		function movmentToPrevious(currentIndex){
			var lastIndex = (arr.length-1);
			arrViewing = [];
			document.getElementById("presentation_movement").innerHTML = "";

			if(currentIndex < 0){				
				var index = 0;
				arr.forEach(function(arrObj){
					var toAppend = document.createElement("div");
					toAppend.id = "div"+index;
					toAppend.innerHTML = arrObj.message;

					if(index == lastIndex){
						arrObj.viewing = 1;
						toAppend.style.display = "block";
						toAppend.style.transition = "opacity .5s linear";
						toAppend.classList.remove("btnhide");
						arrViewing.push(arrObj);
					}else{
						arrObj.viewing = 0;
						toAppend.style.display = "none";
						toAppend.style.transition = "opacity .5s linear";
						toAppend.classList.add("btnhide");
						arrViewing.push(arrObj);
					}

					document.getElementById("presentation_movement")
					.appendChild(toAppend);
					index++;
				});
			}else{
				if(currentIndex >= 0){
					var index = 0;
					arr.forEach(function(arrObj){
						var toAppend = document.createElement("div");
						toAppend.id = "div"+index;
						toAppend.innerHTML = arrObj.message;

						if(index == currentIndex){
							arrObj.viewing = 1;
							toAppend.style.display = "block";
							toAppend.style.transition = "opacity .5s linear";
							toAppend.classList.remove("btnhide");
							arrViewing.push(arrObj);
						}else{
							arrObj.viewing = 0;
							toAppend.style.display = "none";
							toAppend.style.transition = "opacity .5s linear";
							toAppend.classList.add("btnhide");
							arrViewing.push(arrObj);
						}

						document.getElementById("presentation_movement")
						.appendChild(toAppend);
						index++;
					});
				}
			}
		}
	</script>
</head>  
<body onload="loadPresentationInformation_onload();">
	<div class="dpresentation">
		<div class="nmove">
			<div id="profile_pic">
				<img src="./img/humber.png"/>
			</div>
			<h2 id="myname_initial">Humberto</h2>
		</div><br/>
		<div class="move">
			<div class="move_top" id="presentation_movement">
			</div>
		</div>		
		<div class="nmove_bottom">
			<div id="previous">
				<button class="move_bottom_btn" OnClick="movementMessage_onclick('previous')">P</button>
			</div>
			<div id="next">
				<button class="move_bottom_btn" OnClick="movementMessage_onclick('next')">N</button>
			</div>
		</div>
	</div>
	<div class="dtimeline">

	</div>
</body>
</html>